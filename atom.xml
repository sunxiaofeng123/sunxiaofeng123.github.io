<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>雁过留声</title>
  
  <subtitle>改变，是一个循序渐进的过程。</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://sunxiaofeng123.github.io/"/>
  <updated>2018-07-17T14:52:19.000Z</updated>
  <id>https://sunxiaofeng123.github.io/</id>
  
  <author>
    <name>孙晓峰</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>laravel之数据初始化笔记</title>
    <link href="https://sunxiaofeng123.github.io/2018/07/17/laravel-seed-data/"/>
    <id>https://sunxiaofeng123.github.io/2018/07/17/laravel-seed-data/</id>
    <published>2018-07-17T14:37:48.000Z</published>
    <updated>2018-07-17T14:52:19.000Z</updated>
    
    <content type="html"><![CDATA[<p>面对数据库内容填充的需求，一般情况下我们会使用 Laravel 的 『数据填充 Seed』 。可是在当下场景中，我们无法使用此功能。此一般是用来生成假数据，而现在我们需要生成的是项目的 初始化数据，这些数据是项目运行的一部分，在生产环境下也会使用到，而数据填充只能在开发时使用。</p><p>虽然 Laravel 没有自带此类解决方案，不过数据迁移功能倒是比较不错的替代方案。在功能定位上，数据迁移也是项目的一部分，执行的时机刚好是在项目安装时。并且区分执行先后顺序，这确保了初始化数据发生在数据表结构创建完成后。<br>接下来我们使用命令生成数据迁移文件，作为初始化数据的迁移文件，我们定义命名为seed_(数据库名称)_data：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ php artisan make:migration seed_categories_data</span><br></pre></td></tr></table></figure><p>打开生成的迁移文件，并使用一下代码替换<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">use Illuminate\Support\Facades\Schema;</span><br><span class="line">use Illuminate\Database\Schema\Blueprint;</span><br><span class="line">use Illuminate\Database\Migrations\Migration;</span><br><span class="line"></span><br><span class="line">class SeedCategoriesData extends Migration</span><br><span class="line">&#123;</span><br><span class="line">    public function up()</span><br><span class="line">    &#123;</span><br><span class="line">        $categories = [</span><br><span class="line">            [</span><br><span class="line">                &apos;name&apos;        =&gt; &apos;分享&apos;,</span><br><span class="line">                &apos;description&apos; =&gt; &apos;分享创造，分享发现&apos;,</span><br><span class="line">            ],</span><br><span class="line">            [</span><br><span class="line">                &apos;name&apos;        =&gt; &apos;教程&apos;,</span><br><span class="line">                &apos;description&apos; =&gt; &apos;开发技巧、推荐扩展包等&apos;,</span><br><span class="line">            ],</span><br><span class="line">            [</span><br><span class="line">                &apos;name&apos;        =&gt; &apos;问答&apos;,</span><br><span class="line">                &apos;description&apos; =&gt; &apos;请保持友善，互帮互助&apos;,</span><br><span class="line">            ],</span><br><span class="line">            [</span><br><span class="line">                &apos;name&apos;        =&gt; &apos;公告&apos;,</span><br><span class="line">                &apos;description&apos; =&gt; &apos;站点公告&apos;,</span><br><span class="line">            ],</span><br><span class="line">        ];</span><br><span class="line"></span><br><span class="line">        DB::table(&apos;categories&apos;)-&gt;insert($categories);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public function down()</span><br><span class="line">    &#123;</span><br><span class="line">        DB::table(&apos;categories&apos;)-&gt;truncate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>代码解析：<br>1、up() 方法中使用DB类的insert()批量往数据表中categories里插入数据$categories;<br>2、down() 在回滚迁移时被调用，up()方法的逆反操作。truncate()是清除categories 数据表里的数据。</p><p>执行迁移：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan migrate</span><br></pre></td></tr></table></figure></p><p>内容学自laravel-china 社区。<br>更多内容: <a href="https://laravel-china.org/docs/php-design-patterns/2018/AbstractFactory/1487" target="_blank" rel="noopener">laravel-china</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;面对数据库内容填充的需求，一般情况下我们会使用 Laravel 的 『数据填充 Seed』 。可是在当下场景中，我们无法使用此功能。此一般是用来生成假数据，而现在我们需要生成的是项目的 初始化数据，这些数据是项目运行的一部分，在生产环境下也会使用到，而数据填充只能在开发时使
      
    
    </summary>
    
    
      <category term="laravel" scheme="https://sunxiaofeng123.github.io/tags/laravel/"/>
    
  </entry>
  
  <entry>
    <title>CentOS 7 安装mongodb以及PHP（7.1）mongodb扩展笔记</title>
    <link href="https://sunxiaofeng123.github.io/2018/07/09/linux-php-mongodb/"/>
    <id>https://sunxiaofeng123.github.io/2018/07/09/linux-php-mongodb/</id>
    <published>2018-07-09T12:04:58.000Z</published>
    <updated>2018-07-09T13:11:40.000Z</updated>
    
    <content type="html"><![CDATA[<p>最近几天帮公司安装linux(centOS7)+php(7.1)+nginx+mysql(5.7)+mongodb(3.6)<br>顺便记一下安装mongodb以及扩展的笔记，以便以后使用。</p><h3 id="方法／步骤"><a href="#方法／步骤" class="headerlink" title="方法／步骤"></a>方法／步骤</h3><h5 id="1、centos-官方提供的mongodb的版本为2-6，相对比较老，我可以用以下命令查看"><a href="#1、centos-官方提供的mongodb的版本为2-6，相对比较老，我可以用以下命令查看" class="headerlink" title="1、centos 官方提供的mongodb的版本为2.6，相对比较老，我可以用以下命令查看"></a>1、centos 官方提供的mongodb的版本为2.6，相对比较老，我可以用以下命令查看</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum list | grep mongodb</span><br></pre></td></tr></table></figure><h5 id="2、配置mongodb3-6的yum源"><a href="#2、配置mongodb3-6的yum源" class="headerlink" title="2、配置mongodb3.6的yum源"></a>2、配置mongodb3.6的yum源</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /ect/yum.repos.d</span><br><span class="line">vim mongodb-org-3.6.repo</span><br><span class="line">[mongodb-org-3.6]</span><br><span class="line">name=MongoDB Repository</span><br><span class="line">baseurl=https://mirrors.aliyun.com/mongodb/yum/redhat/7Server/mongodb-org/3.6/x86_64/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br></pre></td></tr></table></figure><p>上面我们配置的mongodb的yum源是国内的yum源地址，因为国外的比较慢。</p><h5 id="3、安装mongodb"><a href="#3、安装mongodb" class="headerlink" title="3、安装mongodb"></a>3、安装mongodb</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y mongodb-org</span><br></pre></td></tr></table></figure><h5 id="4、启动mongodb"><a href="#4、启动mongodb" class="headerlink" title="4、启动mongodb"></a>4、启动mongodb</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start mongod</span><br><span class="line">systemctl status mongod</span><br></pre></td></tr></table></figure><h3 id="安装PHP-mongodb扩展"><a href="#安装PHP-mongodb扩展" class="headerlink" title="安装PHP mongodb扩展"></a>安装PHP mongodb扩展</h3><p>php7以下扩展下载地址：<a href="http://pecl.php.net/package/mongo" target="_blank" rel="noopener">http://pecl.php.net/package/mongo</a><br>查看 php mongodb的扩展的版本以及下载链接。php7在 <a href="http://pecl.php.net/package/mongodb，我们使用PHP7的。" target="_blank" rel="noopener">http://pecl.php.net/package/mongodb，我们使用PHP7的。</a></p><h5 id="下载扩展"><a href="#下载扩展" class="headerlink" title="下载扩展"></a>下载扩展</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://pecl.php.net/get/mongodb-1.2.8.tgz</span><br><span class="line">tar -xzvf mongodb-1.2.8.tgz</span><br></pre></td></tr></table></figure><h5 id="进入到mongodb-1-2-8目录下，运行phpize来编译扩展。"><a href="#进入到mongodb-1-2-8目录下，运行phpize来编译扩展。" class="headerlink" title="进入到mongodb-1.2.8目录下，运行phpize来编译扩展。"></a>进入到mongodb-1.2.8目录下，运行phpize来编译扩展。</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">phpize</span><br><span class="line">./configure --with-php-config=/usr/bin/php-config</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p>php-config路径不知道可以用 whereis php-config,如果抱openssl错误，可以yum安装一下openssl,然后从新编译。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install openssl-devel</span><br></pre></td></tr></table></figure></p><h5 id="配置php-ini-加入extension-mongodb-so"><a href="#配置php-ini-加入extension-mongodb-so" class="headerlink" title="配置php.ini 加入extension=mongodb.so"></a>配置php.ini 加入extension=mongodb.so</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/php.ini</span><br><span class="line">extendsion=mongodb.so</span><br></pre></td></tr></table></figure><h5 id="重启php-fpm"><a href="#重启php-fpm" class="headerlink" title="重启php-fpm"></a>重启php-fpm</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart php-fpm</span><br></pre></td></tr></table></figure><p>到此为止我们安装配置mongodb已经完毕，我们可以使用php -m 查看扩展，也可以使用phpinfo()查看。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;最近几天帮公司安装linux(centOS7)+php(7.1)+nginx+mysql(5.7)+mongodb(3.6)&lt;br&gt;顺便记一下安装mongodb以及扩展的笔记，以便以后使用。&lt;/p&gt;
&lt;h3 id=&quot;方法／步骤&quot;&gt;&lt;a href=&quot;#方法／步骤&quot; class
      
    
    </summary>
    
    
      <category term="linux" scheme="https://sunxiaofeng123.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>PHP7个常用算法</title>
    <link href="https://sunxiaofeng123.github.io/2018/07/08/php-7suanfa/"/>
    <id>https://sunxiaofeng123.github.io/2018/07/08/php-7suanfa/</id>
    <published>2018-07-08T12:46:22.000Z</published>
    <updated>2018-07-08T13:07:08.000Z</updated>
    
    <content type="html"><![CDATA[<p>下面是7个PHP常用的算法，总结一下笔记，以便今后使用。</p><h3 id="1、冒泡排序"><a href="#1、冒泡排序" class="headerlink" title="1、冒泡排序"></a>1、冒泡排序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function bubble_sort($arr)</span><br><span class="line">&#123;</span><br><span class="line">$n = count($arr);</span><br><span class="line"></span><br><span class="line">for($i = 0; $i&lt;$n-1; $i++) &#123;</span><br><span class="line">for($j = $i+1; $j&lt;$n; $j++) &#123;</span><br><span class="line">if($arr[$j] &lt; $arr[$i]) &#123;</span><br><span class="line">$temp = $arr[$j];</span><br><span class="line">$arr[$i]=$arr[$j];</span><br><span class="line">$arr[$j]=$temp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">return $arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2、归并排序"><a href="#2、归并排序" class="headerlink" title="2、归并排序"></a>2、归并排序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">function merge(&amp;$arr, $left, $mid, $right) </span><br><span class="line">&#123;</span><br><span class="line">  $i = $left;</span><br><span class="line">  $j = $mid + 1;</span><br><span class="line">  $k = 0;</span><br><span class="line">  $temp = array();</span><br><span class="line">  while ($i &lt;= $mid &amp;&amp; $j &lt;= $right)</span><br><span class="line">  &#123;</span><br><span class="line">    if ($arr[$i] &lt;= $arr[$j])</span><br><span class="line">      $temp[$k++] = $arr[$i++];</span><br><span class="line">    else</span><br><span class="line">      $temp[$k++] = $arr[$j++];</span><br><span class="line">  &#125;</span><br><span class="line">  while ($i &lt;= $mid)</span><br><span class="line">    $temp[$k++] = $arr[$i++];</span><br><span class="line">  while ($j &lt;= $right)</span><br><span class="line">    $temp[$k++] = $arr[$j++];</span><br><span class="line">  for ($i = $left, $j = 0; $i &lt;= $right; $i++, $j++)</span><br><span class="line">    $arr[$i] = $temp[$j];</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">function merge_sort(&amp;$arr, $left, $right)</span><br><span class="line">&#123;</span><br><span class="line">  if ($left &lt; $right)</span><br><span class="line">  &#123;</span><br><span class="line">    $mid = floor(($left + $right) / 2);</span><br><span class="line">    merge_sort($arr, $left, $mid);</span><br><span class="line">    merge_sort($arr, $mid + 1, $right);</span><br><span class="line">    merge($arr, $left, $mid, $right);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3、二分查找-递归"><a href="#3、二分查找-递归" class="headerlink" title="3、二分查找-递归"></a>3、二分查找-递归</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function bin_search($arr,$low,$high,$value) </span><br><span class="line">&#123;</span><br><span class="line">    if($low &gt; $high)</span><br><span class="line">        return false;</span><br><span class="line">    else &#123;</span><br><span class="line">        $mid = floor(($low+$high)/2);</span><br><span class="line">        if($value == $arr[$mid])</span><br><span class="line">            return $mid;</span><br><span class="line">        elseif($value &lt; $arr[$mid])</span><br><span class="line">            return bin_search($arr,$low,$mid-1,$value);</span><br><span class="line">        else</span><br><span class="line">            return bin_search($arr,$mid+1,$high,$value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4、二分查找-非递归"><a href="#4、二分查找-非递归" class="headerlink" title="4、二分查找-非递归"></a>4、二分查找-非递归</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function bin_search($arr,$low,$high,$value) </span><br><span class="line">&#123;</span><br><span class="line">    while($low &lt;= $high) &#123;</span><br><span class="line">        $mid=floor(($low+$high)/2);</span><br><span class="line">        if($value == $arr[$mid])</span><br><span class="line">            return $mid;</span><br><span class="line">        elseif($value &lt; $arr[$mid])</span><br><span class="line">           $high = $mid-1;</span><br><span class="line">        else</span><br><span class="line">            $low = $mid+1;</span><br><span class="line">    &#125;</span><br><span class="line">    return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5、快速排序"><a href="#5、快速排序" class="headerlink" title="5、快速排序"></a>5、快速排序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">function quick_sort($arr) </span><br><span class="line">&#123;</span><br><span class="line">    $n = count($arr);</span><br><span class="line">    if($n &lt;= 1)</span><br><span class="line">        return $arr;</span><br><span class="line">    $key = $arr[0];</span><br><span class="line">    $left_arr  = array();</span><br><span class="line">    $right_arr =a rray();</span><br><span class="line">    for($i=1; $i &lt; $n; $i++) &#123;</span><br><span class="line">        if($arr[$i] &lt;= $key)</span><br><span class="line">           $left_arr[]  = arr[$i];</span><br><span class="line">        else</span><br><span class="line">           $right_arr[] = $arr[$i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    $left_arr  = quick_sort($left_arr);</span><br><span class="line">    $right_arr = quick_sort($right_arr);</span><br><span class="line"></span><br><span class="line">    return array_merge($left_arr,array($key),$right_arr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6、选择排序"><a href="#6、选择排序" class="headerlink" title="6、选择排序"></a>6、选择排序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">function select_sort($arr) </span><br><span class="line">&#123;</span><br><span class="line">    $n = count($arr);</span><br><span class="line">    for($i=0; $i &lt; $n; $i++) &#123;</span><br><span class="line">        $k = $i;</span><br><span class="line">        for($j = $i+1; $j &lt; $n; $j++) &#123;</span><br><span class="line">           if($arr[$j] &lt; $arr[$k])</span><br><span class="line">              $k = $j;</span><br><span class="line">        &#125;</span><br><span class="line">        if($k != $i) &#123;</span><br><span class="line">           $temp    = $arr[$i];</span><br><span class="line">           $arr[$i] = $arr[$k];</span><br><span class="line">           $arr[$k] = $temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return $arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7、选择排序"><a href="#7、选择排序" class="headerlink" title="7、选择排序"></a>7、选择排序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">function insert_sort($arr) </span><br><span class="line">&#123;</span><br><span class="line">    $n = count($arr);</span><br><span class="line">    for($i=1; $i &lt; $n; $i++) &#123;</span><br><span class="line">        $tmp = $arr[$i];</span><br><span class="line">        $j = $i-1;</span><br><span class="line">        while($arr[$j] &gt; $tmp) &#123;</span><br><span class="line">           $arr[$j+1] = $arr[$j];</span><br><span class="line">           $arr[$j] = $tmp;</span><br><span class="line">            $j--;</span><br><span class="line">            if($j &lt; 0)</span><br><span class="line">               break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return $arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;下面是7个PHP常用的算法，总结一下笔记，以便今后使用。&lt;/p&gt;
&lt;h3 id=&quot;1、冒泡排序&quot;&gt;&lt;a href=&quot;#1、冒泡排序&quot; class=&quot;headerlink&quot; title=&quot;1、冒泡排序&quot;&gt;&lt;/a&gt;1、冒泡排序&lt;/h3&gt;&lt;figure class=&quot;highli
      
    
    </summary>
    
    
      <category term="php" scheme="https://sunxiaofeng123.github.io/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>laravel之数据填充笔记（5.5）</title>
    <link href="https://sunxiaofeng123.github.io/2018/07/07/laravel-1/"/>
    <id>https://sunxiaofeng123.github.io/2018/07/07/laravel-1/</id>
    <published>2018-07-07T13:26:00.000Z</published>
    <updated>2018-07-07T14:23:59.000Z</updated>
    
    <content type="html"><![CDATA[<p>在实际的项目开发过程中，我们经常会用到一些假数据来对数据库进行填充以方便调试程序，原始的做法是手工一个个在数据库中创建，或者从队友的机器那导出数据填充到开发机器中。Laravel 提供了一套更加现代化、非常简单易用的数据填充方案。<br>1、对要生成假数据的模型指定字段进行赋值-模型工厂；<br>2、批量生成假数据模型-数据填充；</p><h3 id="模型工厂"><a href="#模型工厂" class="headerlink" title="模型工厂"></a>模型工厂</h3><p>Laravel默认为我们集成Faker扩展包，使用该扩展包可以让我很方便生成一些数据。</p><p>示例如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 使用 factory 来创建一个 Faker\Generator 实例</span><br><span class="line">$faker = Faker\Factory::create();</span><br><span class="line"></span><br><span class="line">// 生成用户名</span><br><span class="line">$faker-&gt;name; // &quot;Janie Roob&quot;</span><br><span class="line"></span><br><span class="line">// 生成安全邮箱</span><br><span class="line">$faker-&gt;safeEmail; // &quot;claire.wuckert@example.net&quot;</span><br><span class="line"></span><br><span class="line">// 生成随机日期</span><br><span class="line">$faker-&gt;date // &quot;2011-02-10&quot;</span><br><span class="line"></span><br><span class="line">// 生成随机时间</span><br><span class="line">$faker-&gt;time // &quot;13:03:55&quot;</span><br></pre></td></tr></table></figure><p>我们使用UserFactory生成一些用户信息数据，为示例。<br>database/factories/UserFactory.php</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">use Faker\Generator as Faker;</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">|--------------------------------------------------------------------------</span><br><span class="line">| Model Factories</span><br><span class="line">|--------------------------------------------------------------------------</span><br><span class="line">|</span><br><span class="line">| This directory should contain each of the model factory definitions for</span><br><span class="line">| your application. Factories provide a convenient way to generate new</span><br><span class="line">| model instances for testing / seeding your application&apos;s database.</span><br><span class="line">|</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">$factory-&gt;define(App\Models\User::class, function (Faker $faker) &#123;</span><br><span class="line">    $date_time = $faker-&gt;date . &apos; &apos; . $faker-&gt;time;</span><br><span class="line">    static $password;</span><br><span class="line"></span><br><span class="line">    return [</span><br><span class="line">        &apos;name&apos; =&gt; $faker-&gt;name,</span><br><span class="line">        &apos;email&apos; =&gt; $faker-&gt;safeEmail,</span><br><span class="line">        &apos;password&apos; =&gt; $password ?: $password = bcrypt(&apos;secret&apos;),</span><br><span class="line">        &apos;remember_token&apos; =&gt; str_random(10),</span><br><span class="line">        &apos;created_at&apos; =&gt; $date_time,</span><br><span class="line">        &apos;updated_at&apos; =&gt; $date_time,</span><br><span class="line">    ];</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>define 定义一个指定的数据模型User的模型工厂。define方法接受两个参数，第一个参数为指定的Eloquent的模型类，第二个参数为一个闭包函数，该闭包函数接收一个Faker PHP函数库的实例，让我们可以在函数内部使用Faker方法来生成假数据并为模型的指定字段赋值。</p><h3 id="数据填充"><a href="#数据填充" class="headerlink" title="数据填充"></a>数据填充</h3><p>我们使用Seeder类来给数据填充测试数据。所有的Seeder类都放在database/seeds目录下，文件名需要按照驼峰式来命名，且严格遵守大小鞋规范。laravel默认为我们定了一个DatabaseSeeder类，我们可以在该类中使用call方法来运行其他的Seeder类，以此控制数据填充的顺序。我们可以使用下面命令生成一个UserTableSeeder文件用于填充用户假数据。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan make:seeder UserTableSeeder</span><br></pre></td></tr></table></figure><p>现在让我们使用该方法来创建50个假用户。<br>database/seeds/UsersTableSeeder.php</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">use Illuminate\Database\Seeder;</span><br><span class="line">use App\Models\User;</span><br><span class="line"></span><br><span class="line">class UsersTableSeeder extends Seeder</span><br><span class="line">&#123;</span><br><span class="line">    /**</span><br><span class="line">     * Run the database seeds.</span><br><span class="line">     *</span><br><span class="line">     * @return void</span><br><span class="line">     */</span><br><span class="line">    public function run()</span><br><span class="line">    &#123;</span><br><span class="line">        $users = factory(User::class)-&gt;times(50)-&gt;make();</span><br><span class="line">        User::insert($users-&gt;makeVisible([&apos;password&apos;, &apos;remember_token&apos;])-&gt;toArray());</span><br><span class="line"></span><br><span class="line">        $user = User::find(1);</span><br><span class="line">        $user-&gt;name = &apos;feng&apos;;</span><br><span class="line">        $user-&gt;email = &apos;feng@qq.com&apos;;</span><br><span class="line">        $user-&gt;password = bcrypt(&apos;password&apos;);</span><br><span class="line">        $user-&gt;save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>times 接收一个参数用指定要创建的模型数量，make方法调用后将为模型创建一个集合。makeVisible方法临时显示User模型里指定的隐藏的属性$hidden，接着我们使用insert 方法将生成假用户数据插入到数据库中，最后我们还对第一个用户信息进行了更新，用于登陆此账号。</p><p>接下来我们需要调用DatabaseSeeder 中调用call方法来指定我们要运行假数据填充文件。</p><p>database/seeds/DatabaseSeeder.php</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">use Illuminate\Database\Seeder;</span><br><span class="line">use Illuminate\Database\Eloquent\Model;</span><br><span class="line"></span><br><span class="line">class DatabaseSeeder extends Seeder</span><br><span class="line">&#123;</span><br><span class="line">    /**</span><br><span class="line">     * Run the database seeds.</span><br><span class="line">     *</span><br><span class="line">     * @return void</span><br><span class="line">     */</span><br><span class="line">    public function run()</span><br><span class="line">    &#123;</span><br><span class="line">        Model::unguard();</span><br><span class="line"></span><br><span class="line">        $this-&gt;call(UsersTableSeeder::class);</span><br><span class="line"></span><br><span class="line">        Model::reguard();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在运行生成假数据命令之前，我们需要使用migrate:refresh命令来重置数据库，之后再使用db:seed执行数据填充。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">php artisan migrate:refresh</span><br><span class="line">php artisan db:seed</span><br></pre></td></tr></table></figure><p>如果我们单独指定执行UserTableSeeder数据库填充文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">php artisan migrate:refresh</span><br><span class="line">php artisan db:seed --class=UserTableSeeder</span><br></pre></td></tr></table></figure><p>也可以使用下面一条命令来同时完成数据库的重置和填充操作：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan migrate:refresh --seed</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在实际的项目开发过程中，我们经常会用到一些假数据来对数据库进行填充以方便调试程序，原始的做法是手工一个个在数据库中创建，或者从队友的机器那导出数据填充到开发机器中。Laravel 提供了一套更加现代化、非常简单易用的数据填充方案。&lt;br&gt;1、对要生成假数据的模型指定字段进行
      
    
    </summary>
    
    
      <category term="laravel" scheme="https://sunxiaofeng123.github.io/tags/laravel/"/>
    
  </entry>
  
  <entry>
    <title>PHP设计模式之抽象工厂模式</title>
    <link href="https://sunxiaofeng123.github.io/2018/07/01/hello-world/"/>
    <id>https://sunxiaofeng123.github.io/2018/07/01/hello-world/</id>
    <published>2018-07-01T01:33:16.000Z</published>
    <updated>2018-07-17T14:52:31.000Z</updated>
    
    <content type="html"><![CDATA[<p>在不指定具体类的情况下创建一系列相关或依赖对象。 通常创建的类都实现相同的接口。 抽象工厂的客户并不关心这些对象是如何创建的，它只是知道它们是如何一起运行的。</p><h2 id="代码展示"><a href="#代码展示" class="headerlink" title="代码展示"></a>代码展示</h2><h3 id="AbstractFactory-php"><a href="#AbstractFactory-php" class="headerlink" title="AbstractFactory.php"></a>AbstractFactory.php</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">namespace DesignPatters\Creational\AbstruactFactory;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 在这种情况下，抽象工厂是创建一些组件的契约</span><br><span class="line"> * 在web中， 有两种呈现文本的方式： HTML和JSON</span><br><span class="line"> /</span><br><span class="line"></span><br><span class="line"> abstract class AbstractFactory</span><br><span class="line"> &#123;</span><br><span class="line"> abstract public function cteateText(string $content): Text;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h3 id="JsonFacory-php"><a href="#JsonFacory-php" class="headerlink" title="JsonFacory.php"></a>JsonFacory.php</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">namespace DesignPatterns\Creational\AbstractFactory;</span><br><span class="line"></span><br><span class="line">class JsonFactory extends AbstractFactory</span><br><span class="line">&#123;</span><br><span class="line">public function create(string $content):Text</span><br><span class="line">&#123;</span><br><span class="line">return new JsonText($content)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="HtmlFactory-php"><a href="#HtmlFactory-php" class="headerlink" title="HtmlFactory.php"></a>HtmlFactory.php</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">namespace DesignPatterns\Creational\AbstractFactory;</span><br><span class="line"></span><br><span class="line">class HtmlFactory extends AbstractFaxtory</span><br><span class="line">&#123;</span><br><span class="line">public function cteateText(string $content): Text</span><br><span class="line">&#123;</span><br><span class="line">return new HtmlText($content);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Text-php"><a href="#Text-php" class="headerlink" title="Text.php"></a>Text.php</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">namespace DesignPatterns\Creational\AbstractFactory;</span><br><span class="line"></span><br><span class="line">abstract class Text</span><br><span class="line">&#123;</span><br><span class="line">/**</span><br><span class="line">  *@var string</span><br><span class="line">  *</span><br><span class="line">  /</span><br><span class="line"></span><br><span class="line">  private $text;</span><br><span class="line"></span><br><span class="line">  public function __construct(string $text)</span><br><span class="line">  &#123;</span><br><span class="line">  $this-&gt;text = $text;</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="JsonText-php"><a href="#JsonText-php" class="headerlink" title="JsonText.php"></a>JsonText.php</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">namespace DesignPatterns\Creational\AbstractFactory;</span><br><span class="line"></span><br><span class="line">class JsonText extends Text</span><br><span class="line">&#123;</span><br><span class="line">//你的逻辑代码</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="HtmlText-php"><a href="#HtmlText-php" class="headerlink" title="HtmlText.php"></a>HtmlText.php</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">namespace DesignPatterns\Creational\AbstractFactory;</span><br><span class="line"></span><br><span class="line">class HtmlText extends Text</span><br><span class="line">&#123;</span><br><span class="line">//你的逻辑代码</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Tests-AbstractFactoryTest-php"><a href="#Tests-AbstractFactoryTest-php" class="headerlink" title="Tests\AbstractFactoryTest.php"></a>Tests\AbstractFactoryTest.php</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">namespace DesignPatterns\Creational\AbstractFactory\Tests;</span><br><span class="line"></span><br><span class="line">use DesignPatterns\Creational\AbstractFactory\HtmlFactory;</span><br><span class="line">use DesignPatterns\Creational\AbstractFactory\HtmlText;</span><br><span class="line">use DesignPatterns\Creational\AbstractFactory\JsonFactory;</span><br><span class="line">use DesignPatterns\Creational\AbstractFactory\JsonText;</span><br><span class="line">use PHPUnit\Framework\TestCase;</span><br><span class="line"></span><br><span class="line">class AbstractFactoryTest extend TestCase</span><br><span class="line">&#123;</span><br><span class="line">public function testCanCreateHtmlText()</span><br><span class="line">&#123;</span><br><span class="line">$factory = new HtmlFactory();</span><br><span class="line">$text = $factory-&gt;createText(&apos;foobar&apos;);</span><br><span class="line"></span><br><span class="line">$this-&gt;assertInstanceOf(HtmlText::class, $text);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public function testCanCreateJsonText()</span><br><span class="line">&#123;</span><br><span class="line">$factory = new JsonFactory();</span><br><span class="line">$texgt = $factory-&gt;cteateText(&apos;foorbar&apos;);</span><br><span class="line"></span><br><span class="line">$this-&gt;assertInstanceOf(JsonText::class, $text);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>内容学自laravel-china 社区。<br>更多内容: <a href="https://laravel-china.org/docs/php-design-patterns/2018/AbstractFactory/1487" target="_blank" rel="noopener">laravel-china</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在不指定具体类的情况下创建一系列相关或依赖对象。 通常创建的类都实现相同的接口。 抽象工厂的客户并不关心这些对象是如何创建的，它只是知道它们是如何一起运行的。&lt;/p&gt;
&lt;h2 id=&quot;代码展示&quot;&gt;&lt;a href=&quot;#代码展示&quot; class=&quot;headerlink&quot; titl
      
    
    </summary>
    
    
      <category term="php" scheme="https://sunxiaofeng123.github.io/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>github+hexo搭建静态博客心得</title>
    <link href="https://sunxiaofeng123.github.io/2018/06/28/hello-myblog/"/>
    <id>https://sunxiaofeng123.github.io/2018/06/28/hello-myblog/</id>
    <published>2018-06-28T01:33:16.000Z</published>
    <updated>2018-07-01T07:39:27.000Z</updated>
    
    <content type="html"><![CDATA[<p>一直想搭建一个属于自己的博客，一直没有时间，后来听朋友说使用github+hexo搭建一个静态博客，效果很好，正好自己也一直在用github。昨天正式开始搭建，现在只是把博客的基本架构搭建完成，以后每天慢慢完善，顺便写一些学习到技术的心得，共同学习进步，也提升一下自己写作能力。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;一直想搭建一个属于自己的博客，一直没有时间，后来听朋友说使用github+hexo搭建一个静态博客，效果很好，正好自己也一直在用github。昨天正式开始搭建，现在只是把博客的基本架构搭建完成，以后每天慢慢完善，顺便写一些学习到技术的心得，共同学习进步，也提升一下自己写作能
      
    
    </summary>
    
    
      <category term="博客" scheme="https://sunxiaofeng123.github.io/tags/%E5%8D%9A%E5%AE%A2/"/>
    
  </entry>
  
</feed>
